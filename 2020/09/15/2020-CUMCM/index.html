<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>2020-CUMCM-A | 遐想的空中宫殿</title><meta name="description" content="最优炉温曲线制定论文 —— 记 2020 年中国大学生数学建模竞赛 A 题"><meta name="keywords" content="数学建模"><meta name="author" content="skyleaworlder"><meta name="copyright" content="skyleaworlder"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="shortcut icon" href="/img/skyleaworlder.png"><link rel="canonical" href="http://yoursite.com/2020/09/15/2020-CUMCM/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="2020-CUMCM-A"><meta property="og:url" content="http://yoursite.com/2020/09/15/2020-CUMCM/"><meta property="og:site_name" content="遐想的空中宫殿"><meta property="og:description" content="最优炉温曲线制定论文 —— 记 2020 年中国大学生数学建模竞赛 A 题"><meta property="og:image" content="https://www.cambridge-sensotec.co.uk/wp-content/uploads/2015/11/Solder-Reflow-Oven-1024x588.jpg"><meta property="article:published_time" content="2020-09-15T02:59:58.000Z"><meta property="article:modified_time" content="2020-12-20T07:08:37.290Z"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  hexoversion: '4.2.1',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime: '',
  date_suffix: {"one_hour":"Just","hours":"hours ago","day":"days ago"},
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  isPhotoFigcaption: true,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
    },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true,
  postUpdate: '2020-12-20 15:08:37'
}</script><noscript><style type="text/css">
#nav {
  opacity: 1
}
.justified-gallery img {
  opacity: 1
}
</style></noscript><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
  }
}

var autoChangeMode = 'false'
var t = saveToLocal.get('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (saveToLocal.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/skyleaworlder.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">22</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">23</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div></div></div></div><div id="body-wrap"><div id="web_bg" data-type="photo"></div><div id="sidebar"><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#前言"><span class="toc-number">1.</span> <span class="toc-text">前言</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#摘要"><span class="toc-number">2.</span> <span class="toc-text">摘要</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#问题-1-中"><span class="toc-number">2.1.</span> <span class="toc-text">问题 1 中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题-2-中"><span class="toc-number">2.2.</span> <span class="toc-text">问题 2 中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题-3-中"><span class="toc-number">2.3.</span> <span class="toc-text">问题 3 中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题-4-中"><span class="toc-number">2.4.</span> <span class="toc-text">问题 4 中</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#关键词"><span class="toc-number">2.5.</span> <span class="toc-text">关键词</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#问题重述"><span class="toc-number">3.</span> <span class="toc-text">问题重述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#问题背景"><span class="toc-number">3.1.</span> <span class="toc-text">问题背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题重述-1"><span class="toc-number">3.2.</span> <span class="toc-text">问题重述</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模型假设"><span class="toc-number">4.</span> <span class="toc-text">模型假设</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#符号说明"><span class="toc-number">5.</span> <span class="toc-text">符号说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模型建立与求解"><span class="toc-number">6.</span> <span class="toc-text">模型建立与求解</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#回焊炉温度模型的建立"><span class="toc-number">6.1.</span> <span class="toc-text">回焊炉温度模型的建立</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#温区间隙——一维稳态热传导过程"><span class="toc-number">6.1.1.</span> <span class="toc-text">温区间隙——一维稳态热传导过程</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#炉前炉后区域——等截面直肋导热模型"><span class="toc-number">6.1.2.</span> <span class="toc-text">炉前炉后区域——等截面直肋导热模型</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#一般温区与特殊小温区——线性与非线性分布"><span class="toc-number">6.1.3.</span> <span class="toc-text">一般温区与特殊小温区——线性与非线性分布</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#回焊炉空气温度曲线"><span class="toc-number">6.1.4.</span> <span class="toc-text">回焊炉空气温度曲线</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题一的求解"><span class="toc-number">6.2.</span> <span class="toc-text">问题一的求解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#问题一的求解原理——非稳态过程抽象近似法：集总参数法"><span class="toc-number">6.2.1.</span> <span class="toc-text">问题一的求解原理——非稳态过程抽象近似法：集总参数法</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#问题一求解过程"><span class="toc-number">6.2.2.</span> <span class="toc-text">问题一求解过程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题二的算法与求解"><span class="toc-number">6.3.</span> <span class="toc-text">问题二的算法与求解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#问题二的求解方法——单变量全局搜索"><span class="toc-number">6.3.1.</span> <span class="toc-text">问题二的求解方法——单变量全局搜索</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#问题二的求解过程"><span class="toc-number">6.3.2.</span> <span class="toc-text">问题二的求解过程</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题三的算法与求解"><span class="toc-number">6.4.</span> <span class="toc-text">问题三的算法与求解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#问题三的分析"><span class="toc-number">6.4.1.</span> <span class="toc-text">问题三的分析</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#问题三的解决办法一：带剪枝的回溯算法"><span class="toc-number">6.4.1.1.</span> <span class="toc-text">问题三的解决办法一：带剪枝的回溯算法</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#问题三的解决办法二：优化的贪心搜索算法"><span class="toc-number">6.4.1.2.</span> <span class="toc-text">问题三的解决办法二：优化的贪心搜索算法</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#问题三的求解过程与结果"><span class="toc-number">6.4.2.</span> <span class="toc-text">问题三的求解过程与结果</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题四的算法与求解"><span class="toc-number">6.5.</span> <span class="toc-text">问题四的算法与求解</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#问题四的分析"><span class="toc-number">6.5.1.</span> <span class="toc-text">问题四的分析</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#问题四的算法——最邻近重采样"><span class="toc-number">6.5.1.1.</span> <span class="toc-text">问题四的算法——最邻近重采样</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#问题四的解决办法一：像元大小倍数相等的温度残差和"><span class="toc-number">6.5.1.2.</span> <span class="toc-text">问题四的解决办法一：像元大小倍数相等的温度残差和</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#问题四的解决办法二：温度对称的斜率残差平方和"><span class="toc-number">6.5.1.3.</span> <span class="toc-text">问题四的解决办法二：温度对称的斜率残差平方和</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#问题四的求解过程与结果"><span class="toc-number">6.5.2.</span> <span class="toc-text">问题四的求解过程与结果</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#模型的评价与改进"><span class="toc-number">7.</span> <span class="toc-text">模型的评价与改进</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#模型优点"><span class="toc-number">7.1.</span> <span class="toc-text">模型优点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#模型缺点"><span class="toc-number">7.2.</span> <span class="toc-text">模型缺点</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#参考文献与引用"><span class="toc-number">8.</span> <span class="toc-text">参考文献与引用</span></a></li></ol></div></div></div><header class="post-bg" id="page-header" style="background-image: url(https://www.cambridge-sensotec.co.uk/wp-content/uploads/2015/11/Solder-Reflow-Oven-1024x588.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">遐想的空中宫殿</a></span><span id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 链接</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">2020-CUMCM-A</div></div><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2020-09-15T02:59:58.000Z" title="Created 2020-09-15 10:59:58">2020-09-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2020-12-20T07:08:37.290Z" title="Updated 2020-12-20 15:08:37">2020-12-20</time></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">Word count:</span><span class="word-count">9.6k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">Reading time:</span><span>32min</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>这是我第一次参加国赛，也或许是我最后一次参加数学建模比赛。</p>
<p>在这种赛事中，我总是充当辅助者的角色，而非团队首脑。比如这次，我除了写论文和给论文排版之外，就没有做其他什么事情了。这或许与我 <strong>敢于后退</strong> 有关吧。说真的，我觉得这种思想很不好。</p>
<p>感谢这次队友，同样也感谢之前所有一起参入数学建模比赛，一起熬夜合作的队友，都不容易。</p>
<h3 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h3><p>本文基于<strong>一维稳态传热过程</strong>、<strong>等截面直肋导热模型</strong>、<strong>集总参数分析法</strong>等方式，研究了最优炉温曲线制定问题。<br>首先，借助一维稳态传热理论、等截面直肋导热模型，利用给定的回焊炉指标值（如各小温区温度、间隙、炉前炉后长度等）以及炉温曲线，经计算机拟合得到<strong>弛豫时间</strong> $\tau_s$，<strong>直肋导热系数</strong> $m$ 等参数，拟合出特定情况下的炉温曲线；<br>其次，利用<strong>单变量全局搜索方法</strong>，考虑实际工业流程中的问题，求解出焊接过程传送带速度极大值；<br>再次，利用<strong>带剪枝的回溯算法与贪心搜索算法</strong>，进一步得到了“升温面积”极小时的炉温曲线、各小温区温度以及传送带速度。<br>最后，基于之前的条件，使用 <strong>像元大小倍数相等的温度残差平方和</strong> 与 <strong>温度相等的斜率残差平方和</strong> 两种指标，进一步得出使 峰值两侧炉温曲线近似对称 的最优炉温曲线以及各项指标值。</p>
<h4 id="问题-1-中"><a href="#问题-1-中" class="headerlink" title="问题 1 中"></a>问题 1 中</h4><p>关键问题是求解焊接区域中心炉温曲线对应的 <strong>弛豫时间与等截面直肋导热系数</strong>。<br>针对未放入电路板的回焊炉，通过一维稳态导热过程，分析温区间隙的温度分布；<br>通过等截面直肋导热模型，分析回焊炉中炉前、炉后区域的温度；<br>最后，通过 <strong>集总参数分析法</strong>，使用表格中数据，反推出回焊炉中的空气与电子元件之间的弛豫时间 <script type="math/tex">\tau_{s}</script>  为 52.10s，炉前等截面直肋导热系数 <script type="math/tex">m_{front}</script> 为 0.05，炉后 <script type="math/tex">m_{back}</script> 为 0.017。<br>进而得到第 3 温区中心温度 139.15$^\circ$C，第 6 温区中心温度 183.16$^\circ$C，第 7 温区中心温度 209.04$^\circ$C，第 8 温区末尾温度 236.91$^\circ$C，以及给定条件下的炉温曲线。</p>
<h4 id="问题-2-中"><a href="#问题-2-中" class="headerlink" title="问题 2 中"></a>问题 2 中</h4><p>首先使用问题 1 中求得的参数和题目中的各温区温度，模拟题目中的炉温曲线。<br>此后，利用单变量全局搜索遍历速度的可能取值，在<strong>制程界限的规定条件</strong>下，求得最大传送带过炉速度 $v$ 为 69cm/min。</p>
<h4 id="问题-3-中"><a href="#问题-3-中" class="headerlink" title="问题 3 中"></a>问题 3 中</h4><p>该问存在 5 个自变量需要确定，分别是 1-5 温区、6 温区、7 温区、8-9 温区温度以及传送带运行速度。<br>本文给出了两种求解方法。第一种为大规模的剪枝配合回溯算法，在广度上保证所有满足可行域的解均被枚举，但又大大降低了计算复杂性。<br>第二种为根据本题条件优化的<strong>贪心搜索算法</strong>，每次取当前点周围 $2^5$ 个，共 32 个样本点，选取最优方向为下一次迭代起点。<br>综合两种方法，在 1-5 温区取 184.9793$^\circ$C，6 温区取 203.1618$^\circ$C，7 温区取 244.0947$^\circ$C，8-9 温区取 264.9755$^\circ$C，传送带速度为 91.0426 m/s 时，面积最小为 845.8592。</p>
<h4 id="问题-4-中"><a href="#问题-4-中" class="headerlink" title="问题 4 中"></a>问题 4 中</h4><p>该问将判断峰值两侧对称程度，转化为计算回流区 217$^\circ$C 到冷却区 217$^\circ$C 像元大小倍数相等的温度残差和 或 温度相等的斜率残差平方和 两种指标值。<br>对问题 3 给出的最优炉温曲线集，使用上述指标进行打分，归一化后比较排序。<br>最后得出当 1-5 温区取 183.9009$^\circ$C，6 温区取 194.9547$^\circ$C，7 温区取 240.9227$^\circ$C，8-9 温区取 262.8614$^\circ$C，传送带速度为 84.6185 m/s 时，峰值温度两侧曲线更具对称性。</p>
<h4 id="关键词"><a href="#关键词" class="headerlink" title="关键词"></a>关键词</h4><p>一维稳态传热过程  集总参数分析法  等截面直肋导热模型  贪心算法  回溯法</p>
<h3 id="问题重述"><a href="#问题重述" class="headerlink" title="问题重述"></a>问题重述</h3><h4 id="问题背景"><a href="#问题背景" class="headerlink" title="问题背景"></a>问题背景</h4><p>在集成电路板等电子产品生产中，需要安装有各种电子元件的印刷电路板放置在回焊炉中，通过加热，将电子元件自动焊接到电路板上。</p>
<p>而回流焊（Reflow Soldering）是指利用焊膏将一或多个电子元件连接到接触垫之后，通过控制加温来熔化焊料以达到永久接合的过程。</p>
<p>为确保生产的电子产品质量，需要令回焊炉内部各温区保证工艺要求的温度。<br>目前，<strong>这方面的许多工作是通过实验测试来进行控制和调整的</strong>。</p>
<p>现有一回焊炉，其所在的生产车间温度保持在 25$^\circ$C。<br>回焊炉内置炉前炉后区域以及 11 个小温区，每个温区长为 30.5 cm 。<br>其中，11 个小温区又从功能上被划分为 预热区、恒温区、回流区、冷却区 4 大温区。<br>各温区设定的温度分别为 175$^\circ$C（小温区 1-5）、195$^\circ$C（小温区 6）、235$^\circ$C（小温区 7）、255$^\circ$C（小温区 8-9）及 25$^\circ$C（小温区10-11）<br>除温区外，包括炉前区域 25 cm、炉后区域 25 cm、温区间隙 5 cm 等区域<strong>均不控制温度</strong>。</p>
<p>回焊炉启动后，在待加工的电路板送入前，各温区将迅速升高到标定温度并保持稳定，即温区大体保持恒温状态。<br>此后，电路板被送至传送带中间位置。带上电路板在经回焊炉加热焊接处理时，传送带始终保持匀速。<br>需加工的厚度为 0.15 mm 的元件，即焊接区域，置于集成电路板之上。<br>被加工电子元件的中心位置设有一温度传感器，此温度传感器每隔 0.5 秒检查一次环境温度。当其温度达到 30 $^\circ$ 时开始工作，此后每间隔 0.5 秒记录一次炉温。</p>
<p>电路板中心的 <strong>电子元件的中心温度称作“炉温”</strong>，在焊接过程中，炉温曲线需要 <strong>遵照一定的制程界限设计</strong>。</p>
<p>受实际情况（如机器功耗成本、机器参数、生产率）限制，实际生产时，可以通过<strong>调节各温区的设定温度和传送带的过炉速度</strong>来控制产品质量。<br>在上述实验设定温度的基础上，各温区温度仅能在设定温度的 10 $^\circ$C 范围内调整；<br>1-5 温区温度需一致，8-9 温区温度需一致，10-11 温区温度将始终保持与室温 25 $^\circ$C 相同；<br>升降温速率需在 $\pm 3^\circ$C/s 范围内；<br>温度上升过程中处在 150$^\circ$C 到 190$^\circ$C 的时间必须在 60秒 到 120 秒之间；<br>峰值温度不得超出 240 $^\circ$C 到 250 $^\circ$C 之间；<br>超过 217 $^\circ$ C 的温度也不得超出 40 秒到 90 秒的范围；<br>传送带的速度也因功耗原因被限制在 65 cm/min 到 100 cm/min 之间。</p>
<h4 id="问题重述-1"><a href="#问题重述-1" class="headerlink" title="问题重述"></a>问题重述</h4><p>针对回焊炉温区温度、传送带速度相关的炉温曲线设计问题，本文依次解决以下四个问题：</p>
<ol>
<li>建立与各温区温度、传送带速度有关的炉温曲线模型。利用给定的离散炉温曲线，确定热传导、对流传热中的各个参数。<br> 在新条件下（温区 1-5 为 173$^\circ$C，温区 6 为 198$^\circ$C，温区 7 为 230$^\circ$C，温区 8-9 为 257 $^\circ$C，传送带速度为 78 cm/min）给出指定位置炉温，以及整个回流焊过程对应的炉温曲线，<br> 并记录每隔0.5 s焊接区域中心的温度。</li>
<li>在新条件下（温区 1-5 为 182$^\circ$C，温区 6 为 203$^\circ$C，温区 7 为 237$^\circ$C，温区 8-9 为 254 $^\circ$C），给出满足制程界限所有要求时的最大传送带速度。</li>
<li>实际焊接过程中，焊接区域中心温度超过 217$^\circ$C 的时间应尽量缩短，峰值温度也应尽可能逼近峰值温度制程界限的最小值。<br> 在此条件下，设定 11 个温区的温度以及传送带速度，并求出 217$^\circ$C 到峰值温度间炉温曲线的覆盖面积。</li>
<li>在满足制程界限的前提下，要求尽可能确保峰值温度两侧曲线尽可能对称，即焊接区域于 25$^\circ$C 中冷却速率与其在温区 8-9 中的升温速率大体相同。<br> 在此条件下，给出 11 个温区的温度以及传送带速度，同时给出整个过炉过程中的所有指标值。</li>
</ol>
<h3 id="模型假设"><a href="#模型假设" class="headerlink" title="模型假设"></a>模型假设</h3><p>由于本题来源于实际工业流程，在整个求解过程中，假设：</p>
<ol>
<li>焊接区域的主要材料未知，其形状为长方体。焊接区域元件的物理参数（如密度、比热容等）恒定，不随自身温度变化而变化。</li>
<li>回焊炉中使用的气体为空气。温度达到稳定后，不同区域间空气不流通。忽略温度的改变对空气密度、比热容的影响。</li>
<li>进入回焊炉前，焊接区域温度为生产车间环境室温。炉前区域起点（回焊炉入口）与炉后区域终点（回焊炉出口）两处温度为生产车间环境室温。</li>
<li>仅考虑各温区对温区间的间隙、炉前炉后区域的热传导与热对流效应。忽略<strong>热辐射</strong>作用。</li>
<li>焊接区域与电路板的温度不影响回焊炉中各区域（包括温区、温区间隙、炉前炉后区域）温度。忽略电路板可能携带的热量，忽略电路板对温区温度作用产生的细微变化。</li>
<li>回焊炉各温区中，以传送带运动方向为轴，其法平面为等温面。</li>
</ol>
<h3 id="符号说明"><a href="#符号说明" class="headerlink" title="符号说明"></a>符号说明</h3><p><img src="symbol.png" alt="符号说明"></p>
<h3 id="模型建立与求解"><a href="#模型建立与求解" class="headerlink" title="模型建立与求解"></a>模型建立与求解</h3><h4 id="回焊炉温度模型的建立"><a href="#回焊炉温度模型的建立" class="headerlink" title="回焊炉温度模型的建立"></a>回焊炉温度模型的建立</h4><p>回焊炉中，各个温区中央温度在回焊炉启动后短时间达到稳定，且不受传送带上电路板的影响。<br>因此，在传送带工作时，传送带上各个位置点的温度一定。<br>由于回焊炉各温区温度保持稳定，而温区间隙温度未加特殊控制，未控制区域温度仅受到恒温温区影响。</p>
<p>与此同时，电子元件若需经回焊炉加工处理，则电子元件，即焊接区域，需利用电路板为载体。<br>此外，回焊炉中加热过程如图所示。</p>
<p><img src="reflow-oven.png" alt="回流焊示意图"></p>
<p>本节将回焊炉内区域划分为三部分论述：</p>
<ol>
<li>温区间隙</li>
<li>炉前炉后区域</li>
<li>一般温区与特殊的小温区</li>
</ol>
<h5 id="温区间隙——一维稳态热传导过程"><a href="#温区间隙——一维稳态热传导过程" class="headerlink" title="温区间隙——一维稳态热传导过程"></a>温区间隙——一维稳态热传导过程</h5><p>热空气通过回焊炉传送带上下的吹气装置鼓入，尽可能保证温区温度不变，同时 <strong>高速的热空气气流会阻碍温区间的相互影响</strong>。</p>
<p>对于 5cm 的温区间隙，由于其宽度过小，本文将对 <strong>温区间隙温度分布近似处理</strong>，仅考虑温区间隙中的热传导作用。</p>
<p>因此，从回焊炉启动开始，到传送带上各点温度稳定为止，此过程为 <strong>一维稳态热传导过程</strong>。</p>
<p>不妨以回焊炉炉前区域（传送带起点）为坐标原点，传送带运行方向为 $X$ 轴，传送带水平方向为 $Y$ 轴方向，垂直回焊炉所在平面向上方向为 $Z$ 轴方向，建立空间直角坐标系。</p>
<p>根据 <strong>能量守恒定律</strong> 可知，在单位时间 $t$ 内，从 $X, Y, Z$ 三轴方向仅通过导热流入单位元内部的净热量 $\Delta Q_d$ 加上单位元内部自身热源产生的热量 $\Delta Q_v$ 应与单位元内能增量 $\Delta E$，<br>即：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \Delta Q_d + \Delta Q_v = \Delta E
    \label{eq:energy_eq1}
\end{equation}</script><p>根据 <strong>傅里叶定律</strong>，在单位时间 $d\tau$ 内，在 $X$ 轴方向，有如下等式：</p>
<script type="math/tex; mode=display">
\begin{cases}
    Q_{inx} = \displaystyle{\lambda \frac{\partial T}{\partial x} dydzd\tau} \\
    \\
    Q_{outx} = \displaystyle{\lambda \frac{\partial}{\partial x}(T + \frac{\partial T}{\partial x} dx) dydzd\tau} \\
    \\
    \Delta Q_d = \displaystyle{\lambda \frac{\partial^2 T}{\partial x^2} dxdydzd\tau}
\end{cases}</script><p>因此在三维方向上，单位时间内，流入单位元的净热量为：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \Delta Q_d = \lambda(\displaystyle{\frac{\partial^2 T}{\partial x^2} + \frac{\partial^2 T}{\partial y^2} + \frac{\partial^2 T}{\partial z^2}} dxdydzd\tau)
    \label{eq:Q_d_3dim}
\end{equation}</script><p>另外两个方向的流入单位元的净热量同理可得。</p>
<p>忽略热传导时处在焊接区域内的电子元件密度和比热容的变化，则在单位时间 $d\tau$ 内，单位元内能增量为：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \Delta E = \rho c \displaystyle{\frac{\partial T}{\partial \tau}} dxdydzd\tau
    \label{eq:E_delta}
\end{equation}</script><p>由于本题中温区温度大体保持不变，并且考察的温区间隙区域中均无热源存在，因此上式可等同于：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \rho c \displaystyle{\frac{\partial T}{\partial \tau}} = \lambda(\displaystyle{ \
        \frac{\partial^2 T}{\partial x^2} + \
        \frac{\partial^2 T}{\partial y^2} + \
        \frac{\partial^2 T}{\partial z^2})}
    \label{eq:energy_eq2}
\end{equation}</script><p>由热扩散系数定义 $a = \displaystyle{\frac{\lambda}{\rho c}}$，从而推出 无内热源} 情况下笛卡尔坐标系中三维非稳态导热微分方程式：</p>
<script type="math/tex; mode=display">
    \displaystyle{\frac{1}{a} \frac{\partial u}{\partial \tau} = \frac{\partial^2 T}{\partial x^2} + \frac{\partial^2 T}{\partial y^2} + \frac{\partial^2 T}{\partial z^2}}</script><p>由题目及假设知，每个温区中，延热空气气流方向温度不变，同时垂直传送带运行方向温度不变。<br>而由于温区间隙和不同温区设定温度的不同，传送带方向的温度随 $X$ 轴坐标变化，即：</p>
<script type="math/tex; mode=display">
    \displaystyle{\frac{\partial T}{\partial z} = 0}, \qquad
    \displaystyle{\frac{\partial T}{\partial y} = 0}, \qquad
    \displaystyle{\frac{\partial T}{\partial x} \neq 0} \qquad</script><p>同时，由于回焊炉启动后，炉内空气温度会在短时间内达到稳定。<br>当电路板随传送带进入回焊炉中时，传送带上各点温度已确定。</p>
<p>综上，该过程为以传送带运行方向为 $X$ 轴的一维稳态热传导过程。<br>对于该过程，有：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \displaystyle{\frac{d^2 T}{d x^2} = 0}
    \label{eq:1_dim_none_src}
\end{equation}</script><p>由上式可得：在不考虑其他因素的一维理想条件下，未受控制区域以 <strong>区域两侧温度 $T<em>{end}, T</em>{begin}$、位置 $x<em>{end}, x</em>{begin}$</strong> 为边界条件，微分方程的通解为线性方程：</p>
<script type="math/tex; mode=display">
    T = \displaystyle{\frac{T_{end} - T_{begin}}{x_{end} - x_{begin}}} x + T_{begin}</script><p>仅考虑 <strong>一维稳态导热过程</strong> 的温度分布图像大体如图所示。</p>
<p><img src="1_dim.png" alt="一维稳态导热过程示意图"></p>
<h5 id="炉前炉后区域——等截面直肋导热模型"><a href="#炉前炉后区域——等截面直肋导热模型" class="headerlink" title="炉前炉后区域——等截面直肋导热模型"></a>炉前炉后区域——等截面直肋导热模型</h5><p>由题干知：回焊炉各温区边界附近温度也可能受相邻温区影响，同时炉前炉后区域不做特殊温度控制。</p>
<p>相比于温区间隙，炉前炉后区域更长，存在自然热对流，且炉前炉后区域两侧 <strong>温差极大</strong>，远大于温区间隙两侧温差。<br>回焊炉温区温度势必通过 <strong>热传导效应</strong> 和 <strong>自然对流换热</strong> 改变 <strong>炉前炉后区域</strong> 的原有温度分布。<br>故该区域温度变化分布 <strong>不可根据</strong> <strong>一维稳态传热过程</strong> 使之近似线性分布。</p>
<p>如图所示，假设传送带法面均为 <strong>等温面</strong>。</p>
<p><img src="lepian.png" alt="等截面直肋导热示意图"></p>
<p>例如，炉前区域在无热源条件下，会受相邻的第 1 温区热传导和对流换热影响，导致炉前区域温度呈 <strong>非线性变化</strong>。</p>
<p>由假设，引入回焊炉加热区域面积 $A<em>{oven}$ 与周长 $C</em>{oven}$，则在流入单位元内热量 $\frac{\partial Q_{inx}}{\partial x}$，对流换热热量 $Q_c$ 为：</p>
<script type="math/tex; mode=display">
    \begin{cases}
        \displaystyle{\frac{\partial Q_{inx}}{\partial x}} = \lambda A_{oven} \displaystyle{\frac{\partial^2 T}{\partial x^2}} \\
        \\
        Q_{outx} = Q_{inx} + \displaystyle{\frac{\partial Q_{inx}}{\partial x}} \\
        \\
        Q_c = h(T - T_{env})C_{oven}dx \\
    \end{cases}</script><p>由能量守恒定律推出的关系得知：</p>
<script type="math/tex; mode=display">
    \frac{d^2 T}{dx^2} = \frac{hC_{oven}}{\lambda A_{oven}}(T - T_{env})</script><p>利用过余温度定义，方程化简为：<br>（注：此处 $X$ 轴原点为第 1 温区入口处，$X$ 轴方向为传送带运行的相反方向。偏微分方程边界条件为第 1 温区入口处、炉前区域入口处的环境温度 $T$ 与坐标 $x$。）</p>
<script type="math/tex; mode=display">
\begin{equation}
    \frac{d^2 \theta}{dx^2} = \frac{hC_{oven}}{\lambda A_{oven}} \theta
\end{equation}</script><p>令 $m = \sqrt{\frac{hC<em>{oven}}{\lambda A</em>{oven}}}$，当 $x \to B_{front}$ 时，过余温度 $\theta \to 0$，此时易得：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \frac{\theta}{\theta_i} = e^{-mx}
\end{equation}</script><h5 id="一般温区与特殊小温区——线性与非线性分布"><a href="#一般温区与特殊小温区——线性与非线性分布" class="headerlink" title="一般温区与特殊小温区——线性与非线性分布"></a>一般温区与特殊小温区——线性与非线性分布</h5><p>由题意得，各温区中心的温度在特殊的控制之下，距离 <strong>炉前炉后区域</strong> 较远的温区，其周围温区与其温差较小，很难出现外部温区影响本温区整体温度的现象。<br>然而由题知：各温区边界附近的温度也可能受到相邻温区温度的影响。</p>
<p>又由 <strong>等截面直肋导热模型</strong>，得知紧靠 <strong>炉前炉后区域</strong> 的温区会影响炉前炉后区域。<br>但与此同时，炉前炉后区域的较低温度也会作用于相邻温区，导致相邻温区温度难以保持在原本的 <strong>设定温度</strong> 上。</p>
<p>本文假设第 1 温区与第 10-11 温区受炉前炉后区域较大影响，升降温速率与 <strong>距回焊炉入口、出口距离</strong> 相关，并以此为基础构建回焊炉温度分布模型。</p>
<h5 id="回焊炉空气温度曲线"><a href="#回焊炉空气温度曲线" class="headerlink" title="回焊炉空气温度曲线"></a>回焊炉空气温度曲线</h5><p>在对 <strong>不同温度温区间隙</strong> 的 <strong>一维稳态热传导过程</strong> 近似处理、使用 <strong>等截面直肋导热模型</strong> 对 <strong>炉前炉后区域</strong> 建模、并综合考虑靠近回焊炉出入口对温区的影响下，利用表格中给出的数据，可模拟得到如图所示的回焊炉空气温度曲线。</p>
<p><img src="air_temp.png" alt="回焊炉空气温度曲线"></p>
<h4 id="问题一的求解"><a href="#问题一的求解" class="headerlink" title="问题一的求解"></a>问题一的求解</h4><h5 id="问题一的求解原理——非稳态过程抽象近似法：集总参数法"><a href="#问题一的求解原理——非稳态过程抽象近似法：集总参数法" class="headerlink" title="问题一的求解原理——非稳态过程抽象近似法：集总参数法"></a>问题一的求解原理——非稳态过程抽象近似法：集总参数法</h5><p>本题将该元件置于电路板上，随传送带移动，传送带受置于回焊炉上下两侧的热空气气流加热。<br>该环境下，对于传送带上给定的某一点 $x<em>0$，设其温度为 $T(x_0)$，同时设生产车间的温度为 $T</em>{\infty}$。</p>
<p>不妨设该元件为长方体，上下表面积为 $A$，厚度为 $d$，（其中 $d &lt;&lt; A^{\frac{1}{2}}$） 则该长方体体积为 $V = Ad$。</p>
<p>在传送带运行过程中，焊接区域的温度持续上升，并于 <strong>进入冷却区前达到峰值</strong>。<br>因此，回焊炉内热空气对焊接区域温度的影响，应该体现为一个 <strong>一维非稳态热传导过程</strong>，对此过程有:</p>
<script type="math/tex; mode=display">
\begin{equation}
    \displaystyle{\frac{\partial T}{\partial \tau} = a \frac{\partial^2 T}{\partial x^2}},
    \qquad a = \displaystyle{\frac{\lambda}{\rho c}}
    \label{eq:1_dim_none_static_none_src}
\end{equation}</script><p>在一维非稳态热传导方程的基础上，设过余温度</p>
<script type="math/tex; mode=display">
\begin{equation}
    \displaystyle{\theta(x, \tau) = T(x, \tau) - T_\infty}
    \label{eq:theta}
\end{equation}</script><p>由题知，加工的焊接区域厚度 $d$ 为 $1.5 \times 10^{-4} m$。<br>在毫米级别下，根据假设1，将该加工原件模拟为任何种类的金属、非金属材料，下为材料热导率 $\lambda$ 表格。</p>
<p><img src="redaolv.png" alt="热导率表"></p>
<p>而热扩散系数与焊接区域厚度乘积的数量级远远小于热导率的数量级。<br>因此，焊接区域在回焊炉中将面临以下问题：</p>
<ol>
<li>物体过薄，物体内部温度变化幅度较小，物体内最高温与最低温的差值较小；</li>
<li>环境温度的改变会立即作用与物体表面，导致物体温度升高、降低较明显；</li>
<li>环境温度对物体温度的改变起主导性作用。</li>
</ol>
<p>按照元件内部最高温与最低温差小于 5% 的要求，上述问题、条件可在数值上体现为如下不等式：</p>
<script type="math/tex; mode=display">
    Bi = \frac{ad}{\lambda} \le 0.1</script><p>如图所示，当物体内部的导热热阻远小于其表面的换热热阻时，由于这时物体内温度梯度很小、温度相差不大，因此可认为整个物体在同一瞬时均处于同一温度之下。</p>
<p><img src="param123.png" alt="Bi 不同的内温度场分布"></p>
<p>这种忽略了物体内部导热热阻的简化分析方法称为 <strong>集总参数法</strong>。</p>
<p>这是一种对实际非稳态过程给出一种抽象和理想化的近似方法。</p>
<p>由题意得，回焊炉中除冷却区外的各温区、间隙温度 $T(x)$ 应大于生产车间环境温度 $T_\infty$。<br>由于本题中始终使用热空气加热元件，且焊接区域材质不发生改变，空气-元件间对流换热系数 $h$ 不变，在任意时刻 $t$，表面热流量交换量 $Q_c$ 均可表示为：</p>
<script type="math/tex; mode=display">
\begin{equation}
    Q_c = - hA(T - T_\infty)
    \label{eq:qc}
\end{equation}</script><p>又因为焊接区域厚度较小，内能改变量 $\Delta E$ 与区域表面热流量交换量 $Q_c$ 存在平衡关系，如图所示。</p>
<p><img src="lumped_param.png" alt="集总参数分析法图例"></p>
<p>由 $\Delta E = Q_c$ 及 $\Delta E$ 与 $Q_c$ 的定义式可推得：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \displaystyle{\rho c V \frac{dT}{d\tau} + hA(T - T_\infty)} = 0
    \label{eq:e_qc_eq}
\end{equation}</script><p>利用过余温度定义化简上式，得到：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \int_{\theta_i}^{\theta} \frac{d\theta}{\theta} = - \int_{0}^{\tau} \frac{hA d\tau}{\rho c V}
\end{equation}</script><script type="math/tex; mode=display">
    \ln\frac{\theta}{\theta_i} = -\frac{hA\tau}{\rho c V}</script><script type="math/tex; mode=display">
\begin{equation}
    \frac{\theta}{\theta_i} = e^{-\frac{hA\tau}{\rho c V}}
    \label{eq:bi_fo_init}
\end{equation}</script><p>通过上式以及 $V = Ad$ 变形得到：</p>
<script type="math/tex; mode=display">
    e^{\displaystyle{-\frac{hA\tau}{\rho cV}}} = e^{\displaystyle{-\frac{\lambda A}{\lambda A} \frac{hA\tau}{\rho cV}}} = e^{\displaystyle{-\frac{hV}{\lambda A} \frac{\lambda A^2 \tau}{\rho cV^2}}} = e^{\displaystyle{-\frac{hd}{\lambda} \frac{a\tau}{d^2}}}</script><p>而由于 $Bi = \displaystyle{\frac{hd}{\lambda}}, Fo = \displaystyle{\frac{a\tau}{d^2}}$，上式可化为：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \frac{\theta}{\theta_i} = e^{-Bi·Fo}
    \label{eq:theta_bi_fo}
\end{equation}</script><p>由此，问题从分别求解 <strong>对流换热系数 $h$、热扩散系数 $a$、未知元件导热率 $\lambda$</strong> 等大量参数，<br>转化为通过 <strong>表格中已知数据</strong> 求解指数部分除时间自变量 $\tau$ 之外的所有 <strong>不受温度影响常量的组合常数</strong>，即 $\displaystyle{\frac{\tau}{Bi·Fo}}$。</p>
<h5 id="问题一求解过程"><a href="#问题一求解过程" class="headerlink" title="问题一求解过程"></a>问题一求解过程</h5><p>由上式以及假设可知，等式右侧 $h, A, \rho, c, V$ 均为常数。设 $\tau_s = \displaystyle{\frac{\tau}{Bi·Fo}} = \displaystyle{\frac{\rho cV}{\alpha A}}$，<br>又由过余温度定义，原式可简化为：</p>
<script type="math/tex; mode=display">
\begin{equation}
    \frac{\theta}{\theta_i} = \frac{T-T_{env}}{T_i - T_{env}} = e^{-\frac{\tau}{\tau_s}}
    \label{eq:theta_tau_s}
\end{equation}</script><p>解得：$T = (T<em>i - T</em>{env})e^{-\frac{\tau}{\tau<em>s}} + T</em>{env}$</p>
<p>由题干得知，在回焊炉的 11 个温区中，1-5 温区、8-9 温区分别要求控制温度相同。<br>由于弛豫时间由 <strong>对流换热系数、热传导系数</strong> 组成，实际情况中与环境有关。<br>因而为获得更准确的弛豫时间常数，选取时间跨度更大、温区温度更稳定的 1-5 温区计算。</p>
<p>取即将进入第 2 温区的时间 $\tau<em>{1,in} = 52.0s$，温度 $T</em>{1,in} = 87.62^\circ$C，第 1 温区到第 5 温区设定的环境温度 $T<em>{env} = 175^\circ$C，<br>离开第 5 温区的时间 $\tau</em>{5,out} = 169.5s$，温度 $T_{5,out} = 166.74^\circ$C。</p>
<p>将上述数据代入：</p>
<script type="math/tex; mode=display">
    166.74^\circ C = (87.62^\circ C - 166.4^\circ C) e^{-\frac{169.5s - 52.0s}{\tau_s}} + 175^\circ C</script><p>解得：$\tau_s \approx 52.10$。</p>
<p>由等式两端可知：</p>
<ol>
<li>$\tau_s$ 越小，则元件温度随环境温度变化越迅速；</li>
<li>$\tau_s$ 越大，则元件温度随环境温度变化越缓慢；</li>
</ol>
<p>将求得的弛豫时间 $\tau_s$ 代入上式中，依次求得表格中对应时间的温度，结果如图所示。</p>
<p><img src="q1_sim.png" alt="模型模拟曲线与给定炉温曲线"></p>
<p><img src="q1_new.png" alt="问题 1 炉温曲线"></p>
<p>此后根据问题 1 中给出的各温区温度，代入模型中，可求得如上图所示的炉温曲线。<br>其中小温区3、6、7中点及小温区8结束处焊接区域中心的温度为：<br>（注：此处使用函数直接计算，故精度较高。后续有关炉温数值均仅保留至 2~4 位小数。）</p>
<p><img src="q1_res.png" alt="问题一指标值"></p>
<h4 id="问题二的算法与求解"><a href="#问题二的算法与求解" class="headerlink" title="问题二的算法与求解"></a>问题二的算法与求解</h4><h5 id="问题二的求解方法——单变量全局搜索"><a href="#问题二的求解方法——单变量全局搜索" class="headerlink" title="问题二的求解方法——单变量全局搜索"></a>问题二的求解方法——单变量全局搜索</h5><p>本题传送带过炉速度 $v \in [65, 100]$ cm/min，范围较小，适合使用单变量全局搜索。</p>
<p>根据题目中的制程界限表以及其他限制条件，搜索过程需要经过如图所示的决策过程：</p>
<p><img src="tree.png" alt="决策树"></p>
<ol>
<li>升降温速率小于 3$^\circ$C/s，满足则判断下一条件；</li>
<li>升温时段温度处于 $(150, 190]^\circ$C 的时间需大于 60s，小于 120s，满足则判断下一条件；</li>
<li>温度大于 217$^\circ$C 的时间应大于 40s，小于 90s，满足则判断下一条件；</li>
<li>温度最大值应大于 240$^\circ$C，小于 250$^\circ$C，满足则输出。</li>
</ol>
<h5 id="问题二的求解过程"><a href="#问题二的求解过程" class="headerlink" title="问题二的求解过程"></a>问题二的求解过程</h5><p>根据给定的各温区温度设定值，基于本文给出的回焊炉温度模型，得到如xx所示的炉温曲线。</p>
<p>该模型属于离散化模型，得到的炉温曲线也为 <strong>温度-时间 / 距离</strong> 离散化曲线。</p>
<p>在进行单变量全局搜索时，该过程的目标函数与约束条件为：</p>
<script type="math/tex; mode=display">
    v_{result} = max{v}</script><script type="math/tex; mode=display">
    s.t.
    \begin{cases}
        |\displaystyle{\frac{dT}{dx}}| \approx |\displaystyle{\frac{T_{i+1} - T_i}{x_{i+1} - x_i}}| \le 3 \\
        \\
        \Delta \tau_{T \in [150, 190]\ and\ \frac{dT}{dx} > 0} \in [60, 120] \\
        \\
        \Delta \tau_{T > 217} \in [40, 90) \\
        \\
        max\{T\} \in [240, 250] \\
    \end{cases}</script><p>最终，得到传送带最大过炉速度为 69cm/min。</p>
<h4 id="问题三的算法与求解"><a href="#问题三的算法与求解" class="headerlink" title="问题三的算法与求解"></a>问题三的算法与求解</h4><h5 id="问题三的分析"><a href="#问题三的分析" class="headerlink" title="问题三的分析"></a>问题三的分析</h5><p>在给定制程界限的前提下，本小问继续添加了新的目标条件——217$^\circ$C至峰值温度曲线覆盖面积尽可能小。<br>由分析可知，若使该面积取得最小值，则可从两个方面考虑：</p>
<ol>
<li>加热至 217$^\circ$C 以上后，回流区末尾环境温度较高，使到达峰值温度（仍在 240$^\circ$C 到 250$^\circ$C 之间）速度较快；</li>
<li>峰值温度在满足制程界限的前提下取得最低值。</li>
</ol>
<p>前者从横坐标轴（时间 或 距离）角度考虑，在 <strong>峰值温度与 217$^\circ$C 差值一定时</strong>，通过 <strong>缩减积分上下限</strong> 减小面积。<br>后者从纵坐标轴（温度）角度考虑，在 <strong>焊接区域由 217$^\circ$C 加热到峰值温度所需时间一定时</strong>，通过 <strong>降低峰值温度</strong> 缩小面积。</p>
<p>上述角度可同时成立，即在满足所有制程界限的前提下，峰值温度取最低值，<strong>且回流区温度取最大值</strong>。</p>
<p>而满足上述条件，需要其他四个指标值（1-5 温区、6 温区、7 温区温度，传送带速度）的协调配合。</p>
<h6 id="问题三的解决办法一：带剪枝的回溯算法"><a href="#问题三的解决办法一：带剪枝的回溯算法" class="headerlink" title="问题三的解决办法一：带剪枝的回溯算法"></a>问题三的解决办法一：带剪枝的回溯算法</h6><p>当所给的问题是从 n 个元素的集合 S 中找出满足某种性质的子集时，相应的解空间树称为子集树。\cite{subset}<br>常用回溯法作为搜索子集树的一般算法。<br>回溯法总共分为两个阶段——递入与回归，代码思路如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">BT(Layer tmp):</span><br><span class="line">    if Valid_Layer(tmp)</span><br><span class="line">        Store_It(tmp)</span><br><span class="line">    else</span><br><span class="line">        for choice &#x3D; 0 -&gt; choice_num(tmp)</span><br><span class="line">            all_choices[tmp] &lt;- choice</span><br><span class="line">            if Constraint(tmp) and Bound(tmp)</span><br><span class="line">                BT(tmp + 1)</span><br><span class="line">    return</span><br></pre></td></tr></table></figure>
<p>根据题目给出的制程界限，可以合理地写出复杂度为常量的 $Constraint$ 函数以及 $Bound$ 函数。<br>本题共五个自变量，即需五层递归。自变量取值范围如下表所示。</p>
<p><img src="q3_scope.png" alt="指标值取值范围表"></p>
<p>首次回溯时，自变量增量取 1 个单位。大致确定极值区间后，再对更高精度进行回溯。</p>
<p>该方法的优点是广度较大，最终结果准确性可以保证。但由于每次确定自变量数值后，都需要重新生成由 700 余点组成的炉温曲线，因此运行速度较慢。</p>
<h6 id="问题三的解决办法二：优化的贪心搜索算法"><a href="#问题三的解决办法二：优化的贪心搜索算法" class="headerlink" title="问题三的解决办法二：优化的贪心搜索算法"></a>问题三的解决办法二：优化的贪心搜索算法</h6><p>贪心算法在每一步都做出当时看起来最佳的选择。也就是说，它总是做出局部最优的选择，寄希望这样的选择能导致全局最优解。<br>对本题，可借助梯度思想辅助贪心算法实现。</p>
<p>初始时刻通过随机函数生成一个点，计算其周围 $2^5$ 个点对应的面积值，并删去不合乎制程界限的点。<br>此后，选取其中面积值最小的一点为前进方向，将此点作为下一轮迭代的中心点。此后，重复上述过程，直至无法找出周围一点使得其面积值小于当前点。</p>
<p>则此刻，贪心算法获得了一个满足题目条件的 <strong>局部最优解</strong>。</p>
<p>由于本题的五个自变量已经给出，贪心算法大致思路如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Greedy():</span><br><span class="line">    st &lt;- &#123;random()&#125; * 5</span><br><span class="line">    local, around &lt;- Calculate_Result(st, Constraint_func)</span><br><span class="line">    res &lt;- local</span><br><span class="line">    while local &lt;&#x3D; res</span><br><span class="line">        local, around &lt;- Calculate_Result(st, Constraint_func)</span><br><span class="line">        if exist element in around &lt; local</span><br><span class="line">            st &lt;- element</span><br><span class="line">            res &lt;- Calculate_Result(element, Constraint_func)</span><br><span class="line">    return res, st</span><br></pre></td></tr></table></figure>
<p>为消除贪心算法带来的影响，可以多次使用随机化数据作为初始指标值，多次重复完整的贪心搜索过程，直至无法找出更小面积为止。</p>
<p>该算法优势在于搜索速度更快，在仅存在唯一极值点的特殊情况下，贪心搜索算法得到的局部最优解就是 <strong>全局最优解</strong>。<br>然而贪心算法存在较大的劣势——不能稳定地输出正确结果。当指标值对面积值影响函数较为复杂时，很难通过有限次数的贪心过程获得全局最优解。<br>其次，本文的贪心搜索算法不能完全确保最终输出的面积值就是最小面积值。</p>
<h5 id="问题三的求解过程与结果"><a href="#问题三的求解过程与结果" class="headerlink" title="问题三的求解过程与结果"></a>问题三的求解过程与结果</h5><p>本文使用 <strong>带剪枝的回溯算法</strong> 与 <strong>贪心搜索算法</strong> 两种方式求解问题。<br>经计算机模拟后，运算结果如附录 <strong>最优炉温曲线指标值表</strong> 所示。</p>
<p>其中最佳指标值为：</p>
<p><img src="q3_res.png" alt="最佳指标值"></p>
<p>上述指标值对应面积为 853.3543。（由于曲线由离散点组成，本文采取左邻法计算离散数据积分，因此面积值存在一定程度上的误差。）</p>
<h4 id="问题四的算法与求解"><a href="#问题四的算法与求解" class="headerlink" title="问题四的算法与求解"></a>问题四的算法与求解</h4><h5 id="问题四的分析"><a href="#问题四的分析" class="headerlink" title="问题四的分析"></a>问题四的分析</h5><p>本问要求包括上述问题的所有条件——不仅满足制程界限，炉温曲线 217$^\circ$C 到峰值温度覆盖面积最小，还需要峰值温度两侧曲线尽量对称。<br>为比较峰值温度两侧图像对称性，应首先统一两侧曲线的样本容量。此后，应使用能够表征对称性的指标得出最优炉温曲线及其对应指标值。</p>
<p>在问题 3 的求解中，分别使用 <strong>带剪枝的回溯法</strong> 以及 <strong>贪心搜索算法</strong> 给出了满足问题 3 条件的情况。<br>本问基于已给出的 <strong>拥有最优炉温曲线</strong> 的解集，使用数值分析方法确定最符合题目条件的解。</p>
<h6 id="问题四的算法——最邻近重采样"><a href="#问题四的算法——最邻近重采样" class="headerlink" title="问题四的算法——最邻近重采样"></a>问题四的算法——最邻近重采样</h6><p>本文根据当前问题，提出一种独特的 依靠 <strong>最邻近重采样</strong> 思想的 <strong>图像对称性</strong> 判断方法。</p>
<p>因此为方便计算机求解问题，需要对炉温曲线上的离散点进行重采样操作，在保证炉温曲线各处特征不变的前提下，将峰值温度两侧数据点数目统一。</p>
<p>重采样是指根据一类象元的信息内插出另一类象元信息的过程。最邻近法是将与该影像中距离某像元位置最近的像元值作为该像元的新值。</p>
<p>升温过程从 217$^\circ$C 到峰值温度的时间 $t_1$ 与降温过程中从峰值温度到 217$^\circ$C 所有时间 $t_2$ 大概率不相同。<br>根据第三题输出的一系列炉温曲线，记录每条炉温曲线超过 217$^\circ$C 部分的数据点。此后，选取 $t_1, t_2$ 中的较大值对应 <strong>炉温曲线段</strong> 作为 <strong>重采样的输入样本</strong>。<br>重采样过程中，需要以 $t_1, t_2$ 较小值对应过程的样本点个数 $n$ 为重采样输出点个数。</p>
<p>不妨设峰值温度对应的时间为 $t_p$，则重采样在保持数据集范围不变的前提下，像元大小为 $\displaystyle{\frac{max{t_1, t_2}}{n}}$，第 $i$ 个像元对应的横坐标值为 $t_p + sgn(t_2 - t_1) · i · \displaystyle{\frac{max{t_1, t_2}}{n}}$。<br>（注：该像元对应坐标值以峰值温度所在横坐标为原点。）</p>
<p>重采样后的 <strong>像元坐标值对应点</strong> 若原本存在，则延用原样本点；若 <strong>重采样像元所需选取的坐标值</strong> 不对应任何原样本点，根据最近邻原则，则选取 <strong>距该坐标值最近的原样本点</strong> 作代替。</p>
<h6 id="问题四的解决办法一：像元大小倍数相等的温度残差和"><a href="#问题四的解决办法一：像元大小倍数相等的温度残差和" class="headerlink" title="问题四的解决办法一：像元大小倍数相等的温度残差和"></a>问题四的解决办法一：像元大小倍数相等的温度残差和</h6><p>对于一对称轴与 $X$ 轴垂直的完全对称曲线，设其对称轴与 $X$ 坐标轴交点为 $(a, 0)$，则有：</p>
<script type="math/tex; mode=display">
    f(a- \Delta x_1) - f(\Delta x_2+a) = c, \qquad c = 0, \qquad \Delta x_1 = \Delta x_2</script><p>由本题所给条件知：8-9 温区中，炉温曲线单调递增；10-11 温区及炉后区域中，炉温曲线单调递减。<br>且炉温曲线变化率 $\frac{dT}{d\tau}$ 或者 $\frac{dT}{dx}$ 与焊接区域中心温度 $T$、焊接区域所处环境温度 $T_{env}$ 相关。<br>而炉温在 <strong>同一大温区内温度变化幅度较小</strong>，因此不存在大温区内变化率突变情况。</p>
<p>综上所述，在题目条件与假设前提下，<strong>残差和仍可作为表征炉温曲线对称性的指标</strong>。</p>
<p>但对非完全对称曲线，$c$ 不恒为 0，问题转化为求解下述问题：</p>
<script type="math/tex; mode=display">
    c_{res} = min\ \displaystyle{\sqrt{\frac{\sum_{i=1}^n  (f(a- \Delta x_1) - f(\Delta x_2+a))^2}{n}}}</script><script type="math/tex; mode=display">
    s.t.
    \begin{cases}
        \Delta x_1 = i · \displaystyle{\frac{t_1}{n}} \\
        \\
        \Delta x_2 = i · \displaystyle{\frac{t_2}{n}} \\
        \\
        i = 1,2,3,...,n \\
    \end{cases}</script><h6 id="问题四的解决办法二：温度对称的斜率残差平方和"><a href="#问题四的解决办法二：温度对称的斜率残差平方和" class="headerlink" title="问题四的解决办法二：温度对称的斜率残差平方和"></a>问题四的解决办法二：温度对称的斜率残差平方和</h6><p>对于一对称轴与 $X$ 轴垂直的完全对称曲线，设其对称轴与 $X$ 坐标轴交点为 $(a, 0)$，样本点 $(x<em>0, y_0)$ 处斜率为 $k</em>{x<em>0}$则有：<br>（注：$k</em>{a - \Delta x}, k_{a + \Delta x}$ 在该题条件下正负性恒不同。）</p>
<script type="math/tex; mode=display">
    k_{a - \Delta x} + k_{a + \Delta x} = c, \qquad c = 0</script><p>重采样时以长度为采样标准，将峰值温度两侧样本点斜率统一记录。此后，以峰值温度为起点，依次取像元大小倍数上的样本点斜率，计算指标 $c_{res}$，其中：</p>
<script type="math/tex; mode=display">
    c_{res} = min\ \displaystyle{\sqrt{\frac{\sum_{i=1}^n (k_{a-\Delta x} + k_{a+\Delta x})^2}{n}}}</script><h5 id="问题四的求解过程与结果"><a href="#问题四的求解过程与结果" class="headerlink" title="问题四的求解过程与结果"></a>问题四的求解过程与结果</h5><p>在问题 3 的基础上，使用给出的最优炉温曲线，并在其中挑选最符合本问题要求的图像。<br>本文使用了 <strong>像元大小倍数相等的温度残差和</strong> 与 <strong>温度对称的斜率残差平方和</strong> 两种指标表示炉温曲线峰值温度两侧图像的对称性。<br>经计算机模拟，运算结果归一化后，比较评价指标值。进而得到最优指标值，以及对应指标值的最优炉温曲线。</p>
<p><img src="q4_best.png" alt="最优炉温曲线"></p>
<p><img src="q4_res.png" alt="对应指标值"></p>
<h3 id="模型的评价与改进"><a href="#模型的评价与改进" class="headerlink" title="模型的评价与改进"></a>模型的评价与改进</h3><h4 id="模型优点"><a href="#模型优点" class="headerlink" title="模型优点"></a>模型优点</h4><ol>
<li>使用一维稳态热传导过程，模拟温区间隙温度分布，大大降低了后续过程的计算量。</li>
<li>使用等截面直肋导热模型，模拟炉前炉后区域与首末温区温度，更加贴合实际情况，在曲线拟合时有更好的表现。</li>
<li>使用回溯法时，通过合理剪枝，大大减小了程序的时间复杂度。</li>
</ol>
<h4 id="模型缺点"><a href="#模型缺点" class="headerlink" title="模型缺点"></a>模型缺点</h4><ol>
<li>相较于实际情况，本文建立的模型为离散化模型，使导数与积分相关的计算结果存在误差，精确度也不尽人意。</li>
<li>本文建立的模型忽略了回焊炉对车间温度的影响，也忽略了传送带、带上电路板对回焊炉温度的影响。</li>
<li>温区之间本应存在更复杂的热传递、热对流以及热辐射效应，且各个方向对焊接区域存在不均匀的加热，本文提出的模型较为理想，与现实情况仍有差距。</li>
</ol>
<h3 id="参考文献与引用"><a href="#参考文献与引用" class="headerlink" title="参考文献与引用"></a>参考文献与引用</h3><ol>
<li>回流焊接-维基百科 <a href="https://zh.wikipedia.org/wiki/%E5%9B%9E%E6%B5%81%E7%84%8A%E6%8E%A5" target="_blank" rel="noopener">https://zh.wikipedia.org/wiki/%E5%9B%9E%E6%B5%81%E7%84%8A%E6%8E%A5</a></li>
<li>回流焊图片 cambridge-sensotec <a href="https://www.cambridge-sensotec.co.uk/blog/2017/08/22/detecting-residual-oxygen-within-solder-reflow/" target="_blank" rel="noopener">https://www.cambridge-sensotec.co.uk/blog/2017/08/22/detecting-residual-oxygen-within-solder-reflow/</a></li>
<li>传热学 科学出版社，北京，2016 徐尚龙</li>
<li>热导率-百度百科 <a href="https://baike.baidu.com/item/%E7%83%AD%E5%AF%BC%E7%8E%87/868266?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/%E7%83%AD%E5%AF%BC%E7%8E%87/868266?fr=aladdin</a></li>
<li>传热学 机械工业出版社，北京，2009 王保国 刘淑艳 王新泉 朱俊强</li>
<li>传热学 科学出版社，北京，2009 张靖周 常海萍</li>
<li>计算机算法设计与分析 中国工信出版集团，电子工业出版社，北京，2018 王晓东</li>
<li>算法导论 机械工业出版社，北京，2013 Thomas H.Cormen Charles E.Leiserson Ronald L.Rivest Clifford Stein</li>
<li>重采样-百度百科 <a href="https://baike.baidu.com/item/%E9%87%8D%E9%87%87%E6%A0%B7/4949402?fr=aladdin" target="_blank" rel="noopener">https://baike.baidu.com/item/%E9%87%8D%E9%87%87%E6%A0%B7/4949402?fr=aladdin</a></li>
</ol>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="https://github.com/skyleaworlder" target="_blank" rel="noopener">skyleaworlder</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://skyleaworlder.github.io/2020/09/15/2020-CUMCM/" target="_blank" rel="noopener">https://skyleaworlder.github.io/2020/09/15/2020-CUMCM/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">本文及其内部由 matlab 绘制的图片禁止一切形式的复制。</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/">数学建模</a></div><div class="post_share"><div class="social-share" data-image="https://www.cambridge-sensotec.co.uk/wp-content/uploads/2015/11/Solder-Reflow-Oven-1024x588.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/10/28/shell-1/"><img class="prev-cover" src="https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1603909475069&amp;di=2023d4cbbb673e9f44655b12cfd23a35&amp;imgtype=0&amp;src=http%3A%2F%2Fss.csdn.net%2Fp%3Fhttps%3A%2F%2Fmmbiz.qpic.cn%2Fmmbiz_jpg%2FZTYjw6KickuB2omt1eg45DoOdNf2pKgicHBWODkXvJqdmB0s9C1v5Wtm3eMD7E5MKPdmkDFaXOLPLKvQkMQy82dA%2F640%3Fwx_fmt%3Djpeg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">shell 脚本学习 —— 通过 setup-ipsec-vpn</div></div></a></div><div class="next-post pull-right"><a href="/2020/09/06/fancy-loop/"><img class="next-cover" src="https://ss1.bdstatic.com/70cFuXSh_Q1YnxGkpoWK1HF6hhy/it/u=1275469444,679450219&amp;fm=26&amp;gp=0.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">fancy-loop</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> Comment</span></div></div><div class="comment-wrap"><div><div id="gitalk-container"></div></div></div></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By skyleaworlder</div><div class="framework-info"><span>Framework </span><a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener">Butterfly</a></div><div class="footer_custom_text">Hello! This is <a href="https://github.com/skyleaworlder" target="_blank" rel="noopener">skyleaworlder</a>...</div></div></footer></div><section id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog"></i></button><a id="to_comment" href="#post-comment" title="Scroll To Comments"><i class="fas fa-comments"></i></a><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><i class="fas fa-arrow-up"></i></button></div></section><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    loader: {
      source: {
        '[tex]/amsCd': '[tex]/amscd'
      }
    },
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        addClass: [200,() => {
          document.querySelectorAll('mjx-container:not([display=\'true\']').forEach( node => {
            const target = node.parentNode
            if (!target.classList.contains('has-jax')) {
              target.classList.add('mathjax-overflow')
            }
          })
        }, '', false]
      }
    }
  }
  
  var script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><script>function addGitalkSource () {
  const ele = document.createElement('link')
  ele.rel = 'stylesheet'
  ele.href= 'https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css'
  document.getElementsByTagName('head')[0].appendChild(ele)
}

function loadGitalk () {
  function initGitalk () {
    var gitalk = new Gitalk({
      clientID: '47acdb8cdd05067e5096',
      clientSecret: '772acc69515bf271c73913a6b3c42de3508a6dd5',
      repo: 'skyleaworlder.github.io',
      owner: 'skyleaworlder',
      admin: ['skyleaworlder'],
      id: '58a87ac37533a4f2c2abbf1428f938f8',
      language: 'zh-CN',
      perPage: 10,
      distractionFreeMode: false,
      pagerDirection: 'last',
      createIssueManually: true,
      updateCountCallback: commentCount
    })
    gitalk.render('gitalk-container')
  }

  if (typeof Gitalk === 'function') initGitalk()
  else {
    addGitalkSource()
    $.getScript('https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js', initGitalk)
  }
}

function commentCount(n){
  let isCommentCount = document.querySelector('#post-meta .gitalk-comment-count')
  if (isCommentCount) {
    isCommentCount.innerHTML= n
  }
}

if ('Gitalk' === 'Gitalk' || !false) {
  if (false) btf.loadComment(document.getElementById('gitalk-container'), loadGitalk)
  else loadGitalk()
} else {
  function loadOtherComment () {
    loadGitalk()
  }
}</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><canvas class="fireworks"></canvas><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
document.body.addEventListener('input', POWERMODE);
</script></div></body></html>